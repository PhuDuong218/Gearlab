<!DOCTYPE html>
<html lang="en">

<head>
    <title>Linh kiện điện tử</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/fontawesome-free-5.15.4-web/css/all.css">
    <link rel="icon" href="../Images/favicon-32x32.png">
    <link rel="stylesheet" href="../../admin/css/order.css">
</head>

<body>
    <div class="container">
        <header class="header__content">
            <!-- Menu -->
            <div class="header__menu">
                <!-- <a class="nav-link" data-widget="pushmenu" href="#" role="button" onclick="toggleMenu()"> -->
                <button id="menu-toggle" class="button-menu"><i class="fas fa-bars"></i></button>

                <!-- menu -->
                <div class="menu">
                    <ul>
                        <li><a href="../../admin/admin.html"><i class="fas fa-home"></i><span>Trang chủ</span></a></li>
                        <!-- <div class="drop"> -->
                        <li class="dropdown">
                            <div class="dropdown-header">
                                <i class="fas fa-box"></i><span>Sản phẩm</span>
                            </div>
                            <i class="fas fa-chevron-right arrow-icon"></i>


                            <div class="dropdown-menu">
                                <a href="../../admin/pages/allproducts.html">Tất cả sản phẩm</a>
                                <a href="../../admin/pages/addproduct.html">Thêm sản phẩm</a>
                            </div>
                        </li>

                        <li class="dropdowns">
                            <div class="dropdowns-header">
                                <i class="fas fa-clipboard-list"></i><span>Quản lý đơn hàng</span>
                            </div>
                            <i class="fas fa-chevron-right arrow-icon"></i>


                            <div class="dropdowns-menu">
                                <a href="../../admin/pages/order.html">Tất cả đơn hàng</a>
                                <a href="../../admin/pages/order.html">Đã xác nhận</a>
                                <a href="../../admin/pages/order.html">Đã giao</a>
                                <a href="../../admin/pages/order.html">Chưa xử lý</a>
                                <a href="../../admin/pages/order.html">Đã hủy</a>
                            </div>
                        </li>
                        <!-- </div> -->

                        <li><a href="../../admin/pages/user.html"><i class="fas fa-user-cog"></i><span>Quản lý người
                                    dùng</span></a></li>
                        <a href="../../admin/pages/statistical.html"><li><i class="fas fa-chart-bar"></i><span>Thống kê</span></li></a>
                        <li><i class="fas fa-cogs"></i><span>Cài đặt</span></li>
                    </ul>
                </div>
            </div>

            <!-- Liên kết và tìm kiếm -->
            <div class="header__main">
                <ul class="header__active">
                    <li><a href="../../index.html"><i class="fas fa-undo-alt"></i> Về trang Web</a></li>
                    <li><a href="/">Liên hệ</a></li>
                </ul>
                <form class="input-group" action="" method="post">
                    <div class="input-wrapper">
                        <input type="text" class="form-control" placeholder="Tìm kiếm..." aria-label="Search">
                        <button type="submit" id="" class="header__search--button">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Công cụ -->
            <div class="header__tool">
                <a href="#" title="Hồ sơ"><i class="fas fa-user"></i></a>
                <a href="#" title="Thông báo"><i class="fas fa-bell"></i></a>
                <a href="#" title="Đăng xuất"><i class="fas fa-sign-out-alt"></i></a>
            </div>
        </header>
    </div>



    <section class="section-container">

        <h1>DANH SÁCH ĐƠN HÀNG</h1>

        <div class="button-container">
            <button class="action-create">
                <i class="fas fa-plus-circle"></i> Tạo
            </button>
            <button class="action-download">
                <i class="fas fa-download"></i> Tải file
            </button>
            <button class="action-print">
                <i class="fas fa-print"></i> In dữ liệu
            </button>
            <button class="action-export">
                <i class="fas fa-file-export"></i> Xuất Excel
            </button>
        </div>

        <div class="find">
            <label for="datemin">Từ ngày: </label>
            <input type="date" id="datemin" name="datemin" min="2000-01-01">
            <label for="datemax">đến ngày</label>
            <input type="date" id="datemax" name="datemax" max="2024-12-31">
            <input type="submit-search" value="Tra cứu">

            <label for="">Trạng thái:</label>
            <select id="" name="">
                <option value="Mặc định">Mặc định</option>
                <option value="Đã xử lý">Đã xử lý</option>
                <option value="Đang xử lý">Đang xử lý</option>
                <option value="Chưa xử lý">Chưa xử lý</option>
            </select>

            <!-- <input type="submit"> -->

        </div>



        <table class="table" style="width:100%">
            <tr>
                <th><input type="checkbox" id="select-all" title="Chọn tất cả"></th>
                <th>ID</th>
                <th>Tên khách hàng</th>
                <th>Thời gian</th>
                <th>Địa chỉ</th>
                <th>Tình trạng đơn hàng</th>
                <th>Chi tiết đơn hàng</th>
            </tr>
            <tr>
                <td><input type="checkbox" class="row-checkbox"></td>
                <td>DH1</td>
                <td>Đỗ Phú Dương</td>
                <td>21-09-2024</td>
                <td>273, An Dương Vương, Quận 5, Tp HCM</td>
                <td>Chưa xử lý</td>
                <td class="table-td"><a href="../../admin/pages/Orderdetails.html">Chi tiết</a></td>
            </tr>

            <tr>
                <td><input type="checkbox" class="row-checkbox"></td>
                <td>DH2</td>
                <td>Phan Tuyết Nhi</td>
                <td>17-10-2024</td>
                <td>273, An Dương Vương, Quận 5, Tp HCM</td>
                <td>Đang xử lý</td>
                <td class="table-td"><a href="../../admin/pages/Orderdetails.html">Chi tiết</a></td>
            </tr>

            <tr>
                <td><input type="checkbox" class="row-checkbox"></td>
                <td>DH3</td>
                <td>Nguyễn Xuân Anh</td>
                <td>10-12-2024</td>
                <td>273, An Dương Vương, Quận 5, Tp HCM</td>
                <td>Đã xử lý</td>
                <td class="table-td"><a href="../../admin/pages/Orderdetails.html">Chi tiết</a></td>
            </tr>

            <tr>
                <td><input type="checkbox" class="row-checkbox"></td>
                <td>DH4</td>
                <td>Phạm Trần Thúy Nhi</td>
                <td>22-05-2024</td>
                <td>273, An Dương Vương, Quận 5, Tp HCM</td>
                <td>Đang xử lý</td>
                <td class="table-td"><a href="../../admin/pages/Orderdetails.html">Chi tiết</a></td>
            </tr>

            <tr>
                <td><input type="checkbox" class="row-checkbox"></td>
                <td>DH5</td>
                <td>Đỗ Ngọc Phương Anh</td>
                <td>16-01-2024</td>
                <td>273, An Dương Vương, Quận 5, Tp HCM</td>
                <td>Đã xử lý</td>
                <td class="table-td"><a href="../../admin/pages/Orderdetails.html">Chi tiết</a></td>
            </tr>

            <tr>
                <td><input type="checkbox" class="row-checkbox"></td>
                <td>DH6</td>
                <td>Phan Tuyết Nhi</td>
                <td>17-10-2024</td>
                <td>273, An Dương Vương, Quận 5, Tp HCM</td>
                <td>Đang xử lý</td>
                <td class="table-td"><a href="../../admin/pages/Orderdetails.html">Chi tiết</a></td>
            </tr>

            <tr>
                <td><input type="checkbox" class="row-checkbox"></td>
                <td>DH7</td>
                <td>Đỗ Phú Dương</td>
                <td>21-09-2024</td>
                <td>273, An Dương Vương, Quận 5, Tp HCM</td>
                <td>Đang xử lý</td>
                <td class="table-td"><a href="../../admin/pages/Orderdetails.html">Chi tiết</a></td>
            </tr>

        </table>

        <div class="button-container">
            <input type="submit" value="Xóa đơn hàng đã chọn">
        </div>

        <div id="create-order-form">
            <h3>Tạo Đơn Hàng Mới</h3>

            <label for="order-id">Mã đơn hàng:</label>
            <input type="text" id="order-id" name="order-id" required>

            <label for="customer-name">Tên khách hàng:</label>
            <input type="text" id="customer-name" name="customer-name" required>

            <label for="delivery-address">Địa chỉ giao hàng:</label>
            <input type="text" id="delivery-address" name="delivery-address" required>

            <label for="order-date">Ngày đặt hàng:</label>
            <input type="date" id="order-date" name="order-date" required>

            <label for="order-status">Trạng thái đơn hàng:</label>
            <select id="order-status" name="order-status" required>
                <option value="Chưa xử lý">Chưa xử lý</option>
                <option value="Đang xử lý">Đang xử lý</option>
                <option value="Đã xử lý">Đã xử lý</option>
            </select>

            <button type="button" id="save-order">Lưu</button>
            <button type="button" id="cancel-create" onclick="cancelCreateOrder()">Hủy</button>
        </div>

    </section>




    <script>
        //  tên một hàm JavaScript thường được sử dụng để thay đổi trạng thái của menu (hiển thị hoặc ẩn đi) 
        // function toggleMenu() {
        //     const menu = document.getElementById("Menu");
        //     if (menu.classList.contains("menu-visible")) {
        //         menu.classList.remove("menu-visible");
        //     } else {
        //         menu.classList.add("menu-visible");
        //     }
        // }


        // Toggle hiển thị menu chính
        document.getElementById('menu-toggle').addEventListener('click', function () {
            const menu = document.querySelector('.menu');
            menu.classList.toggle('menu-visible');
        });

        // Xử lý các dropdown (Sản phẩm)
        document.querySelectorAll('.dropdown-header, .dropdown .arrow-icon').forEach(element => {
            element.addEventListener('click', function () {
                const dropdown = this.closest('.dropdown'); // Tìm dropdown chứa phần tử được nhấn
                toggleDropdown(dropdown);
            });
        });

        // Hàm xử lý toggle mở/đóng menu con
        function toggleDropdown(dropdown) {
            dropdown.classList.toggle('open');
        }

        // Xử lý các dropdowns (Quản lý đơn hàng)
        document.querySelectorAll('.dropdowns-header, .dropdowns .arrow-icon').forEach(element => {
            element.addEventListener('click', function () {
                const dropdowns = this.closest('.dropdowns'); // Tìm dropdown chứa phần tử được nhấn
                toggleDropdown(dropdowns);
            });
        });

        // Chức năng chọn tất cả sản phẩm
        document.getElementById('select-all').addEventListener('change', function () {
            const isChecked = this.checked; // Lấy trạng thái checkbox "Chọn tất cả"
            const checkboxes = document.querySelectorAll('.row-checkbox'); // Tất cả checkbox của các hàng
            checkboxes.forEach((checkbox) => {
                checkbox.checked = isChecked; // Gán trạng thái cho từng checkbox
            });
        });

        // Chức năng xóa sản phẩm cụ thể khi nhấn nút "Xóa"
        document.querySelectorAll('.action-delete').forEach((button) => {
            button.addEventListener('click', function (event) {
                const row = event.target.closest('tr'); // Tìm hàng cần xóa
                if (row) {
                    const confirmDelete = confirm("Bạn có chắc chắn muốn xóa đơn hàng này không?");
                    if (confirmDelete) {
                        row.remove(); // Xóa dòng nếu xác nhận
                        alert("Đơn hàng đã được xóa thành công.");
                    }
                }
            });
        });

        // Chức năng xóa các sản phẩm đã chọn
        document.querySelector('.button-container input[type="submit"]').addEventListener('click', function () {
            const selectedRows = document.querySelectorAll('.row-checkbox:checked'); // Lấy tất cả checkbox đã chọn
            if (selectedRows.length === 0) {
                alert("Không có đơn hàng nào được chọn để xóa!"); // Không có dòng được chọn
                return;
            }

            const confirmDelete = confirm(`Bạn có chắc chắn muốn xóa ${selectedRows.length} đơn hàng đã chọn không?`);
            if (confirmDelete) {
                selectedRows.forEach((checkbox) => {
                    const row = checkbox.closest('tr'); // Tìm hàng chứa checkbox
                    if (row) {
                        row.remove(); // Xóa hàng
                    }
                });
                alert("Các đơn hàng đã được xóa thành công.");
            }
        });

        // Hiển thị form khi bấm vào nút "Tạo"
        document.querySelector('.action-create').addEventListener('click', function () {
            document.getElementById('create-order-form').style.display = 'block'; // Hiển thị form tạo đơn hàng
        });

        // Khi bấm nút "Hủy" trong form
        document.getElementById('cancel-create').addEventListener('click', function () {
            document.getElementById('create-order-form').style.display = 'none'; // Ẩn form
            document.getElementById('create-order-form').reset(); // Làm trống form
        });

        // Khi bấm nút "Lưu"
        document.getElementById('save-order').addEventListener('click', function () {
            const orderId = document.getElementById('order-id').value; // Lấy thông tin từ form
            const customerName = document.getElementById('customer-name').value;
            const deliveryAddress = document.getElementById('delivery-address').value;
            const orderDate = document.getElementById('order-date').value;
            const orderStatus = document.getElementById('order-status').value;

            // Kiểm tra nếu có thông tin nào chưa nhập
            if (!orderId || !customerName || !deliveryAddress || !orderDate || !orderStatus) {
                alert("Vui lòng điền đầy đủ thông tin.");
                return;
            }

            // Tạo một hàng mới trong bảng
            const table = document.querySelector('table tbody');
            const newRow = table.insertRow();

            newRow.innerHTML = `
        <td><input type="checkbox" class="row-checkbox"></td>
        <td>${orderId}</td>
        <td>${customerName}</td>
        <td>${orderDate}</td>
        <td>${deliveryAddress}</td>
        <td>${orderStatus}</td>
        <td class="table-td"><a href="../../admin/pages/Orderdetails.html">Chi tiết</a></td>
    `;

            // Ẩn form tạo đơn hàng sau khi lưu
            document.getElementById('create-order-form').style.display = 'none';
            document.getElementById('create-order-form').reset(); // Làm trống form
        });

        document.getElementById('logout-btn').addEventListener('click', function () {
            if (confirm('Bạn có chắc chắn muốn đăng xuất không?')) {
                window.location.href = 'admin/index.html';
            }
        });


    </script>
</body>

</html>