<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="../css/Cart.css">
    <title>Giỏ hàng</title>
    <link rel="icon" type="image" href="../Images/logo/favicon-32x32.png">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header__content">
            <div class="header__menu" id="mainNav">
                <a class="header__link" href="../page_user/user-index.html">
                    <img class="header__logo" src="../Images/logo/logo.png" alt="logo">
                </a>
                <form class="input-group search-form" action="" method="post">
                    <div class="input-wrapper">
                        <input type="text" class="form-control" placeholder="Tìm kiếm..." aria-label="Search">
                        <button type="submit" id="button-addon2" class="header__search--button">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
                <ul class="header__active">
                    <li><a href="../page_user/user-index.html">Trang chủ</a></li>
                    <li><a href="../page_user/menutong/menu.html">Sản phẩm</a></li>
                    <li><a href="../page_user/Intro.html">Giới thiệu</a></li>
                    <li><a href="../page_user/Contact.html">Liên hệ</a></li>
                </ul>
            </div>
            <div class="header__tool">
                <a href="../page_user/user-profile.html" title="Hồ sơ">
                    <i class="fa fa-user"></i>
                </a>
                <a href="../page_user/Cart.html" title="Giỏ hàng">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="notify-cart">0</span>
                </a>
                <a href="../index.html" title="Đăng xuất">
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            </div>
        </header>

        <!-- Cart Section -->
        <div class="cart">
            <h2>Giỏ Hàng Của Bạn</h2>
            <div class="cart-item" data-price="750000">
                <img src="../Images/BanPhim/banphim2.png" alt="Bàn phím cơ DareU EK65s White Black PBT Dream Switch">
                <div class="cart-details">
                    <p>Bàn phím cơ DareU EK65s White Black PBT Dream Switch</p>
                    <p class="price">750.000₫ <span class="original-price">899.000₫</span></p>
                    <div class="quantity-container">
                        <button class="quantity-button decrease">-</button>
                        <input type="number" id="quantity" value="1" class="quantity-input" />
                        <button class="quantity-button increase">+</button>
                    </div>

                </div>
                <button class="remove-item"><i class="fas fa-trash"></i></button>
            </div>

            <div class="cart-item" data-price="400000">
                <img src="../Images/Chuot/chuot4.png" alt="Chuột Logitech G102 LightSync Black">
                <div class="cart-details">
                    <p>Chuột Logitech G102 LightSync Black</p>
                    <p class="price">400.000₫ <span class="original-price">599.000₫</span></p>
                    <div class="quantity-container">
                        <button class="quantity-button decrease">-</button>
                        <input type="number" id="quantity" value="1" class="quantity-input" />
                        <button class="quantity-button increase">+</button>
                    </div>

                </div>
                <button class="remove-item"><i class="fas fa-trash"></i></button>
            </div>
            
            <div class="cart-total">
                <p>Tạm tính: <span id="total-price">1.150.000₫</span></p>
                <p>Phí vận chuyển: <span id="ship-price" ship-price="30000">30.000₫</span></p>
                <p>Tổng tiền: <span id="total-price-final">1.150.000₫</span></p>
                <button class="order-now" onclick="location.href='../page_user/payment.html'">Đặt hàng ngay</button>
            </div>
            <a href="../page_user/menutong/menu.html" class="return-menu"><i class="fas fa-arrow-alt-circle-left"></i>Tiếp tục mua sắm</a>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer__container">
                <div class="footer__section">
                    <h3>HỖ TRỢ</h3>
                    <ul>
                        <li><a href="#">Hướng dẫn mua hàng</a></li>
                        <li><a href="#">Sản phẩm yêu thích</a></li>
                        <li><a href="https://www.facebook.com/profile.php?id=100067582450693" target="_blank"><i
                                    class="fab fa-facebook-f"></i></a></li>
                        <li><a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a></li>
                    </ul>
                </div>
                <div class="footer__contact">
                    <h3>THÔNG TIN LIÊN HỆ</h3>
                    <p>Giờ làm việc: Thứ 2 - Thứ 7: 8h00 đến 17h30</p>
                    <p>Email: support@gearlab.com</p>
                    <p>Hotline: 1800-1003</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script>
        // Cập nhật tổng tiền
        function updateTotal() {
            let subtotal = 0;
            const shippingFee = parseInt(document.getElementById('ship-price').getAttribute('ship-price'));

            // Tính tổng tiền tạm tính
            document.querySelectorAll('.cart-item').forEach(item => {
                const price = parseInt(item.getAttribute('data-price'));
                const quantity = parseInt(item.querySelector('.quantity-input').value);
                subtotal += price * quantity;
            });

            // Cập nhật tạm tính
            document.getElementById('total-price').innerText = subtotal.toLocaleString('vi-VN') + '₫';

            // Cập nhật tổng tiền cuối cùng
            const finalTotal = subtotal + shippingFee;
            document.getElementById('total-price-final').innerText = finalTotal.toLocaleString('vi-VN') + '₫';
        }

        // Cập nhật số lượng sản phẩm trong giỏ hàng
        function updateCartCount() {
            const itemCount = document.querySelectorAll('.cart-item').length;
            document.querySelector('.notify-cart').innerText = itemCount;
        }

        // Xóa sản phẩm
        document.querySelectorAll('.remove-item').forEach(button => {
            button.addEventListener('click', function () {
                this.closest('.cart-item').remove();
                updateTotal();
                updateCartCount();
            });
        });

        // Tăng hoặc giảm số lượng
        document.querySelectorAll('.quantity-button').forEach(button => {
            button.addEventListener('click', function () {
                const quantityInput = this.closest('.quantity-container').querySelector('.quantity-input');
                let currentValue = parseInt(quantityInput.value);
                if (this.classList.contains('decrease') && currentValue > 1) {
                    quantityInput.value = currentValue - 1;
                } else if (this.classList.contains('increase')) {
                    quantityInput.value = currentValue + 1;
                }
                updateTotal();
            });
        });

        // Kiểm tra giá trị nhập vào ô số lượng
        document.querySelectorAll('.quantity-input').forEach(input => {
            input.addEventListener('input', function () {
                if (this.value < 1) this.value = 1;
                updateTotal();
            });
        });

        // Cập nhật số lượng giỏ hàng và tổng tiền ban đầu
        updateCartCount();
        updateTotal();
    </script>
    <script>
        // Thêm sự kiện click cho nút đăng xuất
        document.querySelector('.fa-sign-out-alt').addEventListener('click', function (event) {
            event.preventDefault(); // Ngăn chặn hành động mặc định
            const confirmLogout = confirm('Bạn có chắc muốn đăng xuất không?');
            if (confirmLogout) {
                window.location.href = '../index.html'; // Điều hướng tới trang đăng xuất
            }
        });
    </script>
</body>

</html>